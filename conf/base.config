/*
 * -------------------------------------------------
 *  Nextflow base config file
 * -------------------------------------------------
 * A 'blank slate' config file, appropriate for general
 * use on most high performace compute environments.
 * Assumes that all software is installed and available
 * on the PATH. Runs in `local` mode - all jobs will be
 * run on the logged in environment.
 */


/*
 * Global default params, used in configs
 */

params {

  help = false
  name = 'nf-wgswes' 
  hostnames = false

  // analysis parameters
  annotateTools = null // Only with --step annotate
  genome = false
  input = null // No default input
  noGVCF = null // g.vcf are produced by HaplotypeCaller
  noStrelkaBP = null // Strelka will use Manta candidateSmallIndels if available
  no_intervals = null // Intervals will be built from the fasta file
  skipQC = null // All QC tools are used
  step = 'mapping' // Starts with mapping
  tools = null // No default Variant Calling or Annotation tools

  maxMultiqcEmailFileSize = 25.MB
  multiqcConfig = "$baseDir/assets/multiqcConfig.yaml"
  metadata = "$baseDir/assets/metadata.tsv"
  
  // genome annotations
  genomeAnnotationPath = "${baseDir}/../annotations"

  // Defaults only, expecting to be overwritten
  cpus = 1
  singleCPUMem = 7.GB
  maxMemory = 128.GB
  maxCpus = 16
  maxTime = 240.h

  // Deprecated params
  annotateVCF = null
  genomeDict = null
  genomeFile = null
  genomeIndex = null
  noReports = null
  sample = null
  sampleDir = null
  publishDirMode = 'copy'

  // Optional files/directory
  cadd_InDels = false // No CADD InDels file
  cadd_InDels_tbi = false // No CADD InDels index
  cadd_WG_SNVs = false // No CADD SNVs file
  cadd_WG_SNVs_tbi = false // No CADD SNVs index
  pon = false // No default PON (Panel of Normals) file for GATK Mutect2 / Sentieon TNscope
  pon_index = false // No default PON index for GATK Mutect2 / Sentieon TNscope
  snpEff_cache = null // No directory for snpEff cache
  targetBED = false // No default TargetBED file for targeted sequencing
  vep_cache = null // No directory for VEP cache

  multiqc_config = "${baseDir}/assets/multiqcConfig.yaml" // Default multiqc config
  
  config_profile_contact = false
  config_profile_description = false
  config_profile_url = false
  custom_config_version = 'devel'
  custom_config_base = "https://gitlab.curie.fr/plarosa/data-analysis_demo"
  monochrome_logs = false // Monochrome logs disabled

  // notifications
  email = false
  plaintext_email = false

  // cluster
  queue = null

  // output directories
  outputDir = './results'
  summaryDir = "${params.outputDir}/summary"

  // conda
  condaCacheDir = "$HOME/conda-cache-nextflow"
  
  geniac {

    tools {
      ascat = "bioconda::ascat=2.5.2"
      bcftools = "bioconda::htslib=1.9 bioconda::bcftools=1.9"
      canceritAllelecount = "bioconda::cancerit-allelecount=4.0.2"
      controlFreec = "bioconda::control-freec=11.4"
      ensemblVep = "bioconda::ensembl-vep"
      fastqc = "bioconda::fastqc=0.11.8"
      freebayes = "bioconda::freebayes=1.2.0"
      bwa = "bioconda::bwa=0.7.17"
      genesplicer = "bioconda::genesplicer=1.0"
      htslib = "bioconda::htslib=1.9"
      manta = "bioconda::htslib=1.9 bioconda::manta=1.5.0"
      qualimap = "bioconda::qualimap=2.2.2b"
      samtools = "bioconda::samtools=1.9"
      snpeff = "bioconda::snpeff=4.3.1t"
      strelka = "bioconda::strelka=2.9.10"
      tiddit = "bioconda::tiddit=2.7.1"
      vcfanno = "bioconda::vcfanno=0.3.1"
      vcftools = "bioconda::vcftools=0.1.16"
      gatk = "bioconda::gatk4=4.1.2.0"
      sambamba = "bioconda::sambamba"
      tabix = "bioconda::tabix"
      gatk_bwa_samtools = "bioconda::gatk4=4.1.2.0 bioconda::bwa=0.7.17 bioconda::samtools=1.9"
      sentieon = "bioconda::sentieon"
      multiqc = "bioconda::multiqc=1.8"
    }

    // options for singularity and docker containers
    containers {
      singularityImagePath = "${baseDir}/../containers/singularity"
      singularityRunOptions = ""
      dockerRunOptions = ""
      root = "${baseDir}"

      // containers are based on CentOS linux
      // some tools require dependcies to be installed with 'yum install'
      // specific dependencies are listed below
      yum {
        fastqc = 'fontconfig dejavu*'
      }

      git {
        // keep this as syntax example
        some_tools = 'https://github.com/some_user/some_tools::commit_hash'
      }
    }
  }


}


/*
 * Environmment variables 
 */

env {
    my_global_var = "someValue"
}

