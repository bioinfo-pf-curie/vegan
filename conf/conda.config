def checkProfileConda(path){
  if (! new File(path).exists()){
    println "   ### ERROR ###   Global conda environment not available. Please use '-profile multiconda' instead."
    System.exit(-1)
  }
}

conda {
    cacheDir = "${params.condaCacheDir}"
}

process {
  checkProfileConda("${baseDir}/environment.ym")
  withLabel:vcftools { conda = "${baseDir}/environment.yml" }
  withLabel:tabix { conda = "${baseDir}/environment.yml" }
  withLabel:samtools { conda = "${baseDir}/environment.yml" }
  withLabel:bedtools { conda = "${baseDir}/environment.yml" }
  withLabel:polym { conda = "${baseDir}/environment.yml" }
  withLabel:sambamba { conda = "${baseDir}/environment.yml" }
  withLabel:manta { conda = "${baseDir}/environment.yml" }
  withLabel:gatk { conda = "${baseDir}/environment.yml" }
  withLabel:preseq { conda = "${baseDir}/environment.yml" }
  withLabel:picard { conda = "${baseDir}/environment.yml" }
  withLabel:ascat { conda = "${baseDir}/environment.yml" }
  withLabel:bcftools { conda = "${baseDir}/environment.yml" }
  withLabel:python { conda = "${baseDir}/environment.yml" }
  withLabel:snpeff { conda = "${baseDir}/environment.yml" }
  withLabel:multiqc { conda = "${baseDir}/environment.yml" }
  withLabel:fastqc { conda = "${baseDir}/environment.yml" }
  withLabel:mosdepth { conda = "${baseDir}/environment.yml" }
  withLabel:bwa { conda = "${baseDir}/environment.yml" }
}